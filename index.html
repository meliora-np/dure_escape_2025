<!-- index.html -->
<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script>
    // === Temporary Access Control for Public Visitors ===
    const launchDate = new Date('2025-11-22T15:00:00+09:00'); // ê³µê°œì¼: 11ì›” 22ì¼ 15ì‹œ (KST)
    const now = new Date();

    const params = new URLSearchParams(window.location.search);
    const hasPreview = params.has('preview');
    const hasCookie = document.cookie.includes('preview=1');

    // ?preview=1ë¡œ ì ‘ì†í•˜ë©´ 12ì‹œê°„ ë™ì•ˆ ì ‘ê·¼ ê°€ëŠ¥ ì¿ í‚¤ ë°œê¸‰
    if (hasPreview) {
        const expiry = new Date(Date.now() + 12 * 60 * 60 * 1000).toUTCString(); // 12ì‹œê°„
        document.cookie = `preview=1; path=/; expires=${expiry}`;
        history.replaceState({}, '', location.pathname); // URLì—ì„œ ?preview ì œê±°
    }

    const isAuthorized = hasPreview || hasCookie;

    // ê³µê°œ ì „ì—ëŠ” ì¼ë°˜ ë°©ë¬¸ìëŠ” Coming Soonìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
    if (now < launchDate && !isAuthorized) {
        window.location.href = 'coming-soon.html';
    }
    </script>

    
    <title>ë‘ë ˆêµíšŒ ì²­ë…„ë¶€ U TURN TO GOD</title>
    <link rel="stylesheet" href="styles.css">

    <style>
        /* CLEAR í‘œì‹œ ì˜¤ë²„ë ˆì´ (ì´ë¯¸ì§€ ìœ„ ë°˜íˆ¬ëª… ë ˆì´ì–´) */
        .story-button {
            position: relative;
            display: flex;
            justify-content: center;
        }

        .clear-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.6);
            color: #00ff99;
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 20px;
            font-weight: bold;
            display: none;
        }


        /* ì—”ë”© ë²„íŠ¼ */
        #ending-section {
            display: none;
            margin-top: 30px;
            text-align: center;
        }

        #ending-section button {
            background-color: #0099ff;
            padding: 1em 2em;
            font-size: 20px;
            border-radius: 20px;
            color: white;
        }
    </style>

</head>



<body class="index">
    
    <header>
        <h3>U, TURN TO GOD</h3>
        <h2>ìŠ¤í† ë¦¬ë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”</h2>
    
    </header>

    <main>
        
        <section class="story-button">
            <button onclick="navigateToStory('exam/exam.html')" class="story-item">
                <div class="story-wrapper">
                    <img src="images/MannaAndQuailLogo.JPG" alt="Exam Story Logo">
                    <span class="clear-badge" id="exam-clear">CLEARED</span>
                </div>
            </button>
        </section>


        <section class="story-button">
            <button onclick="navigateToStory('laptop/laptop.html')" class="story-item">
                <div class="story-wrapper">
                    <img src="images/RephidimLogo.jpg" alt="Laptop Story Logo">
                    <span class="clear-badge" id="laptop-clear">CLEARED</span>
                </div>
            </button>
        </section>


        <section class="story-button">
            <button onclick="navigateToStory('spy/spy.html')" class="story-item">
                <div class="story-wrapper">
                    <img src="images/GoldenCalfLogo.JPG" alt="Spy Story Logo">
                    <span class="clear-badge" id="spy-clear">CLEARED</span>
                </div>
            </button>
        </section>


        <!-- â­ 3ê°œ í´ë¦¬ì–´ ì‹œ ì—”ë”© ë²„íŠ¼ -->
        <section id="ending-section">
            <h2 style="color:white;">ğŸ‰ ì„¸ ê°œì˜ ìŠ¤í† ë¦¬ë¥¼ ëª¨ë‘ í´ë¦¬ì–´í•˜ì…¨ìŠµë‹ˆë‹¤! ğŸ‰</h2>
            <button onclick="window.location.href='closing.html'">í´ë¡œì§• ì˜ìƒ ë³´ëŸ¬ ê°€ê¸°</button>
        </section>

    </main>

    


    <script src="script.js"></script>
    

    <script>
    /*  ===== CLEAR í‘œì‹œ & ì—”ë”© ë²„íŠ¼ í‘œì‹œ ===== */

    const examCleared = localStorage.getItem('examCleared');
    const laptopCleared = localStorage.getItem('laptopCleared');
    const spyCleared = localStorage.getItem('spyCleared');

    if (examCleared === '1') {
        document.getElementById('exam-clear').style.display = 'block';
    }

    if (laptopCleared === '1') {
        document.getElementById('laptop-clear').style.display = 'block';
    }

    if (spyCleared === '1') {
        document.getElementById('spy-clear').style.display = 'block';
    }

    if (examCleared === '1' && laptopCleared === '1' && spyCleared === '1') {
        document.getElementById('ending-section').style.display = 'block';
    }
    </script>

</body>

<div style="text-align:center; margin-top:20px; margin-bottom:40px;">
    <button onclick="resetProgress()" style="
        background-color:#333;
        color:white;
        padding:12px 20px;
        border:none;
        border-radius:1cm;
        font-size:14px;
        cursor:pointer;
    ">
        ì „ì²´ ì§„í–‰ìƒí™© ì´ˆê¸°í™”
    </button>
</div>

<footer>
    <p>&copy; 2025 ë‘ë ˆêµíšŒ ì²­ë…„ë¶€. All rights reserved.</p>
</footer>
</html>
